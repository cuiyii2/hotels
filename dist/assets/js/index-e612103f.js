import{d as V,r,L as T,y as h,n as B,a as v,o as g,c as _,t as b,A as E,b as p,w as x,u as S,M as D,h as M,l as R,H as z,e as G,_ as H}from"./index-ab608e36.js";const I={class:"card filter"},K={key:0,class:"title sle"},L={class:"el-tree-node__label"},O=V({name:"TreeFilter"}),P=V({...O,props:{requestApi:{type:Function,required:!1},data:{type:Array,required:!1},title:{type:String,required:!1},id:{type:String,required:!1,default:"id"},label:{type:String,required:!1,default:"label"},multiple:{type:Boolean,required:!1,default:!1},defaultValue:{type:null,required:!1}},emits:["change"],setup(t,{expose:C,emit:m}){const e=t,w={children:"children",label:e.label},d=r(),i=r([]),s=r([]),c=r(),y=()=>{e.multiple?c.value=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue]:c.value=typeof e.defaultValue=="string"?e.defaultValue:""};T(async()=>{if(y(),e.requestApi){const{data:l}=await e.requestApi();i.value=l,s.value=[{id:"",[e.label]:"\u5168\u90E8"},...l]}}),h(()=>e.defaultValue,()=>B(()=>y()),{deep:!0,immediate:!0}),h(()=>e.data,()=>{var l;(l=e.data)!=null&&l.length&&(i.value=e.data,s.value=[{id:"",[e.label]:"\u5168\u90E8"},...e.data])},{deep:!0,immediate:!0});const o=r("");h(o,l=>{d.value.filter(l)});const q=(l,f,n)=>{if(!l)return!0;let u=n.parent,a=[n.label],k=1;for(;k<n.level;)a=[...a,u.label],u=u.parent,k++;return a.some(N=>N.indexOf(l)!==-1)},A=l=>{e.multiple||m("change",l[e.id])},F=()=>{var l;m("change",(l=d.value)==null?void 0:l.getCheckedKeys())};return C({treeData:i,treeAllData:s,treeRef:d}),(l,f)=>{const n=v("el-input"),u=v("el-scrollbar");return g(),_("div",I,[t.title?(g(),_("h4",K,b(t.title),1)):E("v-if",!0),p(n,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=a=>o.value=a),placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u8FDB\u884C\u8FC7\u6EE4",clearable:""},null,8,["modelValue"]),p(u,{style:z({height:t.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:x(()=>[p(S(D),{ref_key:"treeRef",ref:d,"default-expand-all":"","node-key":t.id,data:t.multiple?i.value:s.value,"show-checkbox":t.multiple,"check-strictly":!1,"current-node-key":t.multiple?"":c.value,"highlight-current":!t.multiple,"expand-on-click-node":!1,"check-on-click-node":t.multiple,props:w,"filter-node-method":q,"default-checked-keys":t.multiple?c.value:[],onNodeClick:A,onCheck:F},{default:x(a=>[M("span",L,[R(l.$slots,"default",{row:a},()=>[G(b(a.node.label),1)],!0)])]),_:3},8,["node-key","data","show-checkbox","current-node-key","highlight-current","check-on-click-node","default-checked-keys"])]),_:3},8,["style"])])}}});const $=H(P,[["__scopeId","data-v-9225441e"],["__file","F:/www/geeker-admin/Geeker-Admin/src/components/TreeFilter/index.vue"]]);export{$ as T};
