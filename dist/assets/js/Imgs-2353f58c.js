import{d as C,N,r as D,O as U,Q as R,R as V,C as j,a as r,o as m,c as E,b as l,w as p,F as W,h as o,u as v,A as h,x as M,l as k,q as P,j as Z,E as g,p as G,g as H,S as X,_ as K,y as Y,U as ee}from"./index-ab608e36.js";import{u as O}from"./upload-6d4f9d04.js";const L=u=>(G("data-v-a6a26594"),u=u(),H(),u),ue={class:"upload-box"},te=["src"],ae=L(()=>o("span",null,"\u7F16\u8F91",-1)),le=L(()=>o("span",null,"\u67E5\u770B",-1)),se=L(()=>o("span",null,"\u5220\u9664",-1)),ie={key:1,class:"upload-empty"},oe={class:"el-upload__tip"},ne=C({name:"UploadImg"}),de=C({...ne,props:{imageUrl:{type:String,required:!0,default:""},api:{type:Function,required:!1},drag:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},fileSize:{type:Number,required:!1,default:5},fileType:{type:Array,required:!1,default:()=>["image/jpeg","image/png","image/gif"]},height:{type:String,required:!1,default:"150px"},width:{type:String,required:!1,default:"150px"},borderRadius:{type:String,required:!1,default:"8px"}},emits:["update:imageUrl"],setup(u,{emit:w}){const s=u;N(a=>({"a6a26594-width":u.width,"a6a26594-height":u.height,"a6a26594-borderRadius":u.borderRadius}));const f=D("id-"+X()),_=D(!1),c=U(R,void 0),d=U(V,void 0),A=j(()=>s.disabled||(c==null?void 0:c.disabled)),q=async a=>{var e;let i=new FormData;i.append("file",a.file);try{const t=(e=s.api)!=null?e:O,{data:n}=await t(i);w("update:imageUrl",n.fileUrl),d!=null&&d.prop&&(c==null||c.validateField([d.prop]))}catch(t){a.onError(t)}},$=()=>{w("update:imageUrl","")},I=()=>{const a=document.querySelector(`#${f.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},B=a=>{const i=a.size/1024/1024<s.fileSize,e=s.fileType.includes(a.type);return e||g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01",type:"warning"}),i||setTimeout(()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${s.fileSize}M\uFF01`,type:"warning"})},0),e&&i},z=()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",type:"success"})},S=()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01",type:"error"})};return(a,i)=>{const e=r("Edit"),t=r("el-icon"),n=r("ZoomIn"),y=r("Delete"),b=r("Plus"),x=r("el-upload"),T=r("el-image-viewer");return m(),E("div",ue,[l(x,{action:"#",id:f.value,class:P(["upload",v(A)?"disabled":"",u.drag?"no-border":""]),multiple:!1,disabled:v(A),"show-file-list":!1,"http-request":q,"before-upload":B,"on-success":z,"on-error":S,drag:u.drag,accept:u.fileType.join(",")},{default:p(()=>[u.imageUrl?(m(),E(W,{key:0},[o("img",{src:u.imageUrl,class:"upload-image"},null,8,te),o("div",{class:"upload-handle",onClick:i[1]||(i[1]=M(()=>{},["stop"]))},[v(A)?h("v-if",!0):(m(),E("div",{key:0,class:"handle-icon",onClick:I},[l(t,null,{default:p(()=>[l(e)]),_:1}),ae])),o("div",{class:"handle-icon",onClick:i[0]||(i[0]=F=>_.value=!0)},[l(t,null,{default:p(()=>[l(n)]),_:1}),le]),v(A)?h("v-if",!0):(m(),E("div",{key:1,class:"handle-icon",onClick:$},[l(t,null,{default:p(()=>[l(y)]),_:1}),se]))])],64)):(m(),E("div",ie,[k(a.$slots,"empty",{},()=>[l(t,null,{default:p(()=>[l(b)]),_:1}),h(" <span>\u8BF7\u4E0A\u4F20\u56FE\u7247</span> ")],!0)]))]),_:3},8,["id","class","disabled","drag","accept"]),o("div",oe,[k(a.$slots,"tip",{},void 0,!0)]),_.value?(m(),Z(T,{key:0,onClose:i[2]||(i[2]=F=>_.value=!1),"url-list":[u.imageUrl]},null,8,["url-list"])):h("v-if",!0)])}}});const Ae=K(de,[["__scopeId","data-v-a6a26594"],["__file","F:/www/geeker-admin/Geeker-Admin/src/components/Upload/Img.vue"]]),Q=u=>(G("data-v-ef94ac01"),u=u(),H(),u),re={class:"upload-box"},ce={class:"upload-empty"},pe=["src"],fe=["onClick"],me=Q(()=>o("span",null,"\u67E5\u770B",-1)),ge=["onClick"],_e=Q(()=>o("span",null,"\u5220\u9664",-1)),Fe={class:"el-upload__tip"},ve=C({name:"UploadImgs"}),ye=C({...ve,props:{fileList:{type:Array,required:!0,default:()=>[]},api:{type:Function,required:!1},drag:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:5},fileSize:{type:Number,required:!1,default:5},fileType:{type:Array,required:!1,default:()=>["image/jpeg","image/png","image/gif"]},height:{type:String,required:!1,default:"150px"},width:{type:String,required:!1,default:"150px"},borderRadius:{type:String,required:!1,default:"8px"}},emits:["update:fileList"],setup(u,{emit:w}){const s=u;N(e=>({"ef94ac01-borderRadius":u.borderRadius,"ef94ac01-width":u.width,"ef94ac01-height":u.height}));const f=U(R,void 0),_=U(V,void 0),c=j(()=>s.disabled||(f==null?void 0:f.disabled)),d=D(s.fileList);Y(()=>s.fileList,e=>{d.value=e});const A=e=>{const t=e.size/1024/1024<s.fileSize,n=s.fileType.includes(e.type);return n||g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01",type:"warning"}),t||setTimeout(()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${s.fileSize}M\uFF01`,type:"warning"})},0),n&&t},q=async e=>{var n;let t=new FormData;t.append("file",e.file);try{const y=(n=s.api)!=null?n:O,{data:b}=await y(t);e.onSuccess(b)}catch(y){e.onError(y)}},$=(e,t)=>{!e||(t.url=e.fileUrl,w("update:fileList",d.value),_!=null&&_.prop&&(f==null||f.validateField([_.prop])),g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",type:"success"}))},I=e=>{d.value=d.value.filter(t=>t.url!==e.url||t.name!==e.name),w("update:fileList",d.value)},B=()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01",type:"error"})},z=()=>{g({title:"\u6E29\u99A8\u63D0\u793A",message:`\u5F53\u524D\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 ${s.limit} \u5F20\u56FE\u7247\uFF0C\u8BF7\u79FB\u9664\u540E\u4E0A\u4F20\uFF01`,type:"warning"})},S=D(""),a=D(!1),i=e=>{S.value=e.url,a.value=!0};return(e,t)=>{const n=r("el-icon"),y=r("ZoomIn"),b=r("Delete"),x=r("el-upload"),T=r("el-image-viewer");return m(),E("div",re,[l(x,{action:"#","list-type":"picture-card",class:P(["upload",v(c)?"disabled":"",u.drag?"no-border":""]),"file-list":d.value,"onUpdate:fileList":t[1]||(t[1]=F=>d.value=F),multiple:!0,disabled:v(c),limit:u.limit,"http-request":q,"before-upload":A,"on-exceed":z,"on-success":$,"on-error":B,drag:u.drag,accept:u.fileType.join(",")},{file:p(({file:F})=>[o("img",{src:F.url,class:"upload-image"},null,8,pe),o("div",{class:"upload-handle",onClick:t[0]||(t[0]=M(()=>{},["stop"]))},[o("div",{class:"handle-icon",onClick:J=>i(F)},[l(n,null,{default:p(()=>[l(y)]),_:1}),me],8,fe),v(c)?h("v-if",!0):(m(),E("div",{key:0,class:"handle-icon",onClick:J=>I(F)},[l(n,null,{default:p(()=>[l(b)]),_:1}),_e],8,ge))])]),default:p(()=>[o("div",ce,[k(e.$slots,"empty",{},()=>[l(n,null,{default:p(()=>[l(v(ee))]),_:1}),h(" <span>\u8BF7\u4E0A\u4F20\u56FE\u7247</span> ")],!0)])]),_:3},8,["class","file-list","disabled","limit","drag","accept"]),o("div",Fe,[k(e.$slots,"tip",{},void 0,!0)]),a.value?(m(),Z(T,{key:0,onClose:t[2]||(t[2]=F=>a.value=!1),"url-list":[S.value]},null,8,["url-list"])):h("v-if",!0)])}}});const we=K(ye,[["__scopeId","data-v-ef94ac01"],["__file","F:/www/geeker-admin/Geeker-Admin/src/components/Upload/Imgs.vue"]]);export{we as U,Ae as a};
