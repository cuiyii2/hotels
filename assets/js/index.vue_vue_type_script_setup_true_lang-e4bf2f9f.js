import{d as U,h as S,a3 as A,r as f,o,c as y,W as $,w as c,j as b,J as T,F as h,f as F,b as x,t as w,a as E,D as L,I as Y,u as I,ac as le,z as te,ad as K,e as O,g as M,ae,Y as z}from"./main-5a92e9dd.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const oe=U({__name:"DyInput",props:{modelValue:{type:[String,Number],default:()=>""},styles:{type:[String],default:()=>""},blur:{type:Function,default:()=>()=>{}},focus:{type:Function,default:()=>()=>{}},change:{type:Function,default:()=>()=>{}},input:{type:Function,default:()=>()=>{}},clear:{type:Function,default:()=>()=>{}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue);return A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(_,l)=>{const u=f("el-input");return o(),y(u,$(_.$attrs,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s),style:e.styles?e.styles:"width: 100%",onBlur:l[1]||(l[1]=s=>e.blur?e.blur(s):!1),onFocus:l[2]||(l[2]=s=>e.focus?e.focus(s):!1),onChange:l[3]||(l[3]=s=>e.change?e.change(s):!1),onInput:l[4]||(l[4]=s=>e.input?e.input(s):!1),onClear:l[5]||(l[5]=s=>e.clear?e.clear():!1)}),null,16,["modelValue","style"])}}}),ne=U({__name:"DySelect",props:{modelValue:{type:[String,Number,Array],default:()=>""},options:{type:Array,default:()=>[]},valueFiled:{type:String,default:"value"},labelFiled:{type:String,default:"label"},change:{type:Function,default:()=>()=>{}},visibleChange:{type:Function,default:()=>()=>{}},removeTag:{type:Function,default:()=>()=>{}},clear:{type:Function,default:()=>()=>{}},blur:{type:Function,default:()=>()=>{}},focus:{type:Function,default:()=>()=>{}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue);return A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(_,l)=>{const u=f("el-option"),s=f("el-select");return o(),y(s,$({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a)},_.$attrs,{style:{width:"100%"},onChange:l[1]||(l[1]=a=>e.change?e.change(a):!1),onVisibleChange:l[2]||(l[2]=a=>e.visibleChange?e.visibleChange(a):!1),onRemoveTag:l[3]||(l[3]=a=>e.removeTag?e.removeTag(a):!1),onClear:l[4]||(l[4]=a=>e.clear?e.clear():!1),onBlur:l[5]||(l[5]=a=>e.blur?e.blur(a):!1),onFocus:l[6]||(l[6]=a=>e.focus?e.focus(a):!1)}),{default:c(()=>[(o(!0),b(h,null,T(n.options,a=>(o(),y(u,{key:a[n.labelFiled],label:a[n.labelFiled],value:a[n.valueFiled]},null,8,["label","value"]))),128))]),_:1},16,["modelValue"])}}}),de={class:"input-row"},ue=U({__name:"DyRadio",props:{modelValue:{type:[Number,String,Boolean,Array],default:()=>""},options:{type:Array,default:()=>[]},valueFiled:{type:String,default:"value"},labelFiled:{type:String,default:"label"},type:{type:String,default:""},change:{type:Function,default:()=>()=>{}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue);return A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(_,l)=>{const u=f("el-radio-button"),s=f("el-radio"),a=f("el-radio-group");return o(),b("div",de,[F(a,$({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value=t)},_.$attrs,{onChange:l[1]||(l[1]=t=>e.change?e.change(t):!1)}),{default:c(()=>[e.type==="button"?(o(!0),b(h,{key:0},T(n.options,t=>(o(),y(u,{key:t[n.valueFiled],label:t[n.valueFiled]},{default:c(()=>[x(w(t[n.labelFiled]),1)]),_:2},1032,["label"]))),128)):(o(!0),b(h,{key:1},T(n.options,t=>(o(),y(s,{key:t[n.valueFiled],label:t[n.valueFiled],border:e.type==="border"},{default:c(()=>[x(w(t[n.labelFiled]),1)]),_:2},1032,["label","border"]))),128))]),_:1},16,["modelValue"])])}}});const re=R(ue,[["__scopeId","data-v-7362e09c"]]),se=U({__name:"DyCheckbox",props:{modelValue:{type:[Number,String,Boolean,Array],default:()=>""},options:{type:Array,default:()=>[]},valueFiled:{type:String,default:"value"},labelFiled:{type:String,default:"label"},type:{type:String,default:""},change:{type:Function,default:()=>()=>{}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue);return A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(_,l)=>{const u=f("el-checkbox-button"),s=f("el-checkbox"),a=f("el-checkbox-group");return o(),y(a,$({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value=t)},_.$attrs,{onChange:l[1]||(l[1]=t=>e.change?e.change(t):!1)}),{default:c(()=>[e.type==="button"?(o(!0),b(h,{key:0},T(n.options,t=>(o(),y(u,{key:t[n.valueFiled],label:t[n.valueFiled]},{default:c(()=>[x(w(t[n.labelFiled]),1)]),_:2},1032,["label"]))),128)):(o(!0),b(h,{key:1},T(n.options,t=>(o(),y(s,{key:t[n.valueFiled],label:t[n.valueFiled],border:e.type==="border"},{default:c(()=>[x(w(t[n.labelFiled]),1)]),_:2},1032,["label","border"]))),128))]),_:1},16,["modelValue"])}}}),ie=U({__name:"DyDatePicker",props:{modelValue:{type:[String,Array,Date],default:()=>""},change:{type:Function,default:()=>()=>{}},blur:{type:Function,default:()=>()=>{}},focus:{type:Function,default:()=>()=>{}},calendarChange:{type:Function,default:()=>()=>{}},panelChange:{type:Function,default:()=>()=>{}},visibleChange:{type:Function,default:()=>()=>{}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue);return A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(_,l)=>{const u=f("el-date-picker");return o(),y(u,$({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},_.$attrs,{style:{width:"100%"},onChange:l[1]||(l[1]=s=>e.change?e.change(s):!1),onBlur:l[2]||(l[2]=s=>e.blur?e.blur(s):!1),onFocus:l[3]||(l[3]=s=>e.focus?e.focus(s):!1),onCalendarChange:l[4]||(l[4]=s=>e.calendarChange?e.calendarChange(s):!1),onPanelChange:l[5]||(l[5]=(s,a,t)=>e.panelChange?e.panelChange(s,a,t):!1),onVisibleChange:l[6]||(l[6]=s=>e.visibleChange?e.visibleChange(s):!1)}),null,16,["modelValue"])}}}),pe={class:"custom-tree-node"},fe=U({__name:"DyTree",props:{modelValue:{type:Array,default:()=>[]},isCancel:{type:Boolean,default:!1},defaultCheckedKeys:{type:Array,default:()=>[]},nodeClick:{type:Function,default:function(){}},nodeContextmenu:{type:Function,default:function(){}},checkChange:{type:Function,default:function(){}},check:{type:Function,default:function(){}},currentChange:{type:Function,default:function(){}},nodeExpand:{type:Function,default:function(){}},nodeCollapse:{type:Function,default:function(){}},nodeDragStart:{type:Function,default:function(){}},nodeDragEnter:{type:Function,default:function(){}},nodeDragLeave:{type:Function,default:function(){}},nodeDragOver:{type:Function,default:function(){}},nodeDragEnd:{type:Function,default:function(){}},nodeDrop:{type:Function,default:function(){}}},emits:["update:modelValue"],setup(n,{emit:k}){const e=n,r=S(e.modelValue),_=S();return A(()=>e.isCancel,()=>{_.value.setCheckedKeys(e.defaultCheckedKeys)}),A(()=>e.modelValue,()=>{r.value=e.modelValue}),k("update:modelValue",r),(l,u)=>{const s=f("el-tree");return o(),y(s,$(l.$attrs,{ref_key:"treeRef",ref:_,modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=a=>r.value=a),style:{width:"100%"},onNodeClick:u[1]||(u[1]=(a,t,g)=>e.nodeClick?e.nodeClick(a,t,g):!1),onNodeContextmenu:u[2]||(u[2]=(a,t,g,N)=>e.nodeContextmenu?e.nodeContextmenu(a,t,g,N):!1),onCheckChange:u[3]||(u[3]=(a,t,g)=>e.checkChange?e.checkChange(a,t,g):!1),onCheck:u[4]||(u[4]=(a,t)=>e.check?e.check(a,t):!1),onCurrentChange:u[5]||(u[5]=(a,t)=>e.currentChange?e.currentChange(a,t):!1),onNodeExpand:u[6]||(u[6]=(a,t,g)=>e.nodeExpand?e.nodeExpand(a,t,g):!1),onNodeCollapse:u[7]||(u[7]=(a,t,g)=>e.nodeCollapse?e.nodeCollapse(a,t,g):!1),onNodeDragStart:u[8]||(u[8]=(a,t)=>e.nodeDragStart?e.nodeDragStart(a,t):!1),onNodeDragEnter:u[9]||(u[9]=(a,t,g)=>e.nodeDragEnter?e.nodeDragEnter(a,t,g):!1),onNodeDragLeave:u[10]||(u[10]=(a,t,g)=>e.nodeDragLeave?e.nodeDragLeave(a,t,g):!1),onNodeDragOver:u[11]||(u[11]=(a,t,g)=>e.nodeDragOver?e.nodeDragOver(a,t,g):!1),onNodeDragEnd:u[12]||(u[12]=(a,t,g,N)=>e.nodeDragEnd?e.nodeDragEnd(a,t,g,N):!1),onNodeDrop:u[13]||(u[13]=(a,t,g,N)=>e.nodeDrop?e.nodeDrop(a,t,g,N):!1)}),{default:c(({node:a})=>[E("span",pe,[E("span",null,w(a.label),1)])]),_:1},16,["modelValue"])}}}),me=n=>(L("data-v-96e5781f"),n=n(),Y(),n),ce={class:"tags"},ye={class:"start"},_e=me(()=>E("span",{class:"line"},"-",-1)),be={class:"end"},ge=U({__name:"Tag",props:{start:{type:Number,default:2e3},end:{type:Number,default:2e3}},setup(n){const k=n;return(e,r)=>(o(),b("div",ce,[E("span",ye,w(k.start),1),_e,E("span",be,w(k.end),1)]))}});const ve=R(ge,[["__scopeId","data-v-96e5781f"]]),Ve=n=>(L("data-v-13ca8ca3"),n=n(),Y(),n),ke=Ve(()=>E("div",{class:"el-upload__tip"},"支持 .jpg、.png、.jpeg 格式",-1)),Ce=U({__name:"DyUpload",setup(n){return(k,e)=>{const r=f("el-icon"),_=f("el-upload");return o(),y(_,{class:"upload-demo",drag:"",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",multiple:""},{tip:c(()=>[ke]),default:c(()=>[F(r,{class:"el-icon--upload"},{default:c(()=>[F(I(le))]),_:1})]),_:1})}}});const he=R(Ce,[["__scopeId","data-v-13ca8ca3"]]),Fe={class:"m-edit-table"},De={key:1},we={key:1},xe={key:1},$e={class:"opt"},Se={style:{display:"flex","align-items":"center","margin-bottom":"10px"}},Ue={style:{"text-align":"right",margin:"0"}},Ne=U({__name:"index",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},editableKeys:{type:Array,default:()=>[]},mode:{type:String,default:"bottom"}},emits:["del","add","onChange"],setup(n,{expose:k,emit:e}){const r=n;let _=S([]);const l=i=>{},u=()=>{let i=K(_.value);for(let p of i)for(let C in p)C.includes("te__mp")&&delete p[C];e("onChange",i)};let s={};for(let i of r.columns)r.data.forEach(p=>{s[i.name]||(s[i.name]=null)});const a=()=>{_.value=r.data;for(let i of _.value)r.editableKeys.includes(i.id)&&(i.edit=!0);u()};te(()=>{A(()=>r.data,i=>{_.value=K(i);for(let p of _.value){r.editableKeys.includes(p.id)&&(p.edit=!0);for(let C in p){let D=`${C}te__mp`;p[D]=p[C]}}},{immediate:!0,deep:!0})});const t=(i,p,C)=>{p.filter(D=>C==D.value),g(i)},g=i=>{i.edit=!0;for(let p in i)p.includes("te__mp")&&(i[p]=i[p.replace("te__mp","")]);u()},N=i=>{i.visible=!1,_.value=_.value.filter(p=>p.id!==i.id),e("del",i)},j=()=>{let i=~~(Math.random()*1e6).toFixed(0),p=Object.assign({},s,{id:i,edit:!0,visible:!1});for(let C in p){let D=`${C}te__mp`;p[D]=p[C]}r.mode==="bottom"&&_.value.push(p),r.mode==="top"&&_.value.unshift(p)},v=(i,p)=>{let C=i.options.find(D=>D.value===p.row[i.name]);return C?C.label:"--"};return k({reset:a}),(i,p)=>{const C=f("el-button"),D=f("el-table-column"),P=f("el-option"),J=f("el-select"),W=f("el-radio"),q=f("el-radio-group"),G=f("el-checkbox"),H=f("el-date-picker"),B=f("el-input"),Q=f("warning-filled"),X=f("el-icon"),Z=f("el-popover"),ee=f("el-table");return o(),b("div",Fe,[n.mode!=="hide"&&n.mode!=="bottom"?(o(),y(C,{key:0,class:"add-button",onClick:j,icon:"plus"},{default:c(()=>[x("新增")]),_:1})):O("",!0),F(ee,{data:I(_),size:"small",style:{width:"100%"},"row-key":"id",border:""},{default:c(()=>[(o(!0),b(h,null,T(n.columns,d=>(o(),b(h,null,[d.type?(o(),y(D,{key:0,type:d.type,width:d.width,align:d.align,fixed:d.fixed,label:d.label},null,8,["type","width","align","fixed","label"])):(o(),y(D,{key:1,prop:d.name,width:d.width,align:d.align,fixed:d.fixed,label:d.label},{default:c(m=>[d.slot?M(i.$slots,d.name,{key:1,item:d,row:m.row},void 0,!0):(o(),b(h,{key:0},[d.readonly?(o(),b(h,{key:0},[x(w(m.row[d.name]),1)],64)):d.valueType==="select"?(o(),b(h,{key:1},[m.row.edit?(o(),y(J,{key:0,clearable:"",placeholder:"请选择",onChange:V=>t(m.row,d.options,d.name),modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V},{default:c(()=>[(o(!0),b(h,null,T(d.options,V=>(o(),y(P,{key:V.value,label:V.label,value:V.value},null,8,["label","value"]))),128))]),_:2},1032,["onChange","modelValue","onUpdate:modelValue"])):(o(),b("span",De,w(v(d,m)),1))],64)):d.valueType==="radio"?(o(),b(h,{key:2},[m.row.edit?(o(),y(q,{key:0,modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V,onChange:V=>t(m.row,d.options,d.name)},{default:c(()=>[(o(!0),b(h,null,T(d.options,V=>(o(),y(W,{key:V.value,label:V.label},null,8,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):O("",!0)],64)):d.valueType==="checkbox"?(o(),y(G,{key:3,modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V,label:"是否拆单",size:"small"},null,8,["modelValue","onUpdate:modelValue"])):d.valueType==="date"?(o(),b(h,{key:4},[m.row.edit?(o(),y(H,{key:0,modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V,type:"date","value-format":"YYYY-MM-DD",clearable:"",placeholder:"请选择"},null,8,["modelValue","onUpdate:modelValue"])):(o(),b("span",we,w(m.row[d.name]||"--"),1))],64)):d.valueType==="number"?(o(),b(h,{key:5},[m.row.edit?(o(),y(B,{key:0,type:"number",placeholder:"请输入",modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V},null,8,["modelValue","onUpdate:modelValue"])):O("",!0)],64)):(o(),b(h,{key:6},[m.row.edit?(o(),y(B,{key:0,type:"number",clearable:"",placeholder:"请输入",modelValue:m.row[d.name],"onUpdate:modelValue":V=>m.row[d.name]=V},null,8,["modelValue","onUpdate:modelValue"])):(o(),b("span",xe,w(m.row[d.name]||"--"),1))],64))],64))]),_:2},1032,["prop","width","align","fixed","label"]))],64))),256)),F(D,{prop:"operator",label:"操作",align:"center",width:"60px",fixed:"right"},{default:c(d=>[E("div",$e,[F(Z,{trigger:"click",visible:d.row.visible,"onUpdate:visible":m=>d.row.visible=m,placement:"top",width:160},{reference:c(()=>[F(C,{text:"",onClick:m=>l(d.row),type:"danger",size:"small"},{default:c(()=>[x("删除")]),_:2},1032,["onClick"])]),default:c(()=>[E("p",Se,[F(X,{color:"#faad14",style:{"margin-right":"10px"}},{default:c(()=>[F(Q)]),_:1}),x(" 删除此行？ ")]),E("div",Ue,[F(C,{size:"small",text:"",onClick:m=>d.row.visible=!1},{default:c(()=>[x("取消")]),_:2},1032,["onClick"]),F(C,{size:"small",text:"",type:"primary",onClick:m=>N(d.row)},{default:c(()=>[x("确定")]),_:2},1032,["onClick"])])]),_:2},1032,["visible","onUpdate:visible"])])]),_:1})]),_:3},8,["data"])])}}});const Te=R(Ne,[["__scopeId","data-v-0555a884"]]),Ee={key:0},Oe=U({__name:"index",props:{formData:{type:Object,default:()=>{}},formColumns:{type:Array,default:()=>[]},formRules:{type:Object,default:()=>{}}},setup(n,{expose:k}){const e=n;let r=S();const _=s=>{e.formData.DyTable=s},l=ae({Input:oe,Select:ne,Radio:re,Checkbox:se,DatePicker:ie,Tree:fe,Upload:he,Tag:ve}),u=S();return k({formRef:u}),(s,a)=>{const t=f("el-form-item"),g=f("el-col"),N=f("el-row"),j=f("el-form");return o(),y(j,$({ref_key:"formRef",ref:u,model:e.formData,rules:e.formRules},s.$attrs),{default:c(()=>[F(N,null,{default:c(()=>[(o(!0),b(h,null,T(e.formColumns,(v,i)=>(o(),y(g,{key:i,span:v.span,offset:v.offset},{default:c(()=>[v.slotName?M(s.$slots,v.slotName,{key:0}):v.DyTable?(o(),y(t,{key:1,label:v.label},{default:c(()=>[F(Te,{mode:"top",columns:v.column,data:v.data,ref_for:!0,ref:"table",editableKeys:I(r),onOnChange:_},null,8,["columns","data","editableKeys"])]),_:2},1032,["label"])):(o(),y(t,$({key:2,label:v.label,prop:v.prop},v.formItemOpts),{default:c(()=>[(o(),y(z(I(l)[v.xType]),$(v,{modelValue:e.formData[v.prop],"onUpdate:modelValue":p=>e.formData[v.prop]=p}),null,16,["modelValue","onUpdate:modelValue"])),v.child&&e.formData[v.prop]==99?(o(),b("div",Ee,[(o(),y(z(I(l)[v.child.xType]),$(v.child,{modelValue:e.formData[v.child.prop],"onUpdate:modelValue":p=>e.formData[v.child.prop]=p}),null,16,["modelValue","onUpdate:modelValue"]))])):O("",!0)]),_:2},1040,["label","prop"]))]),_:2},1032,["span","offset"]))),128))]),_:3})]),_:3},16,["model","rules"])}}});export{Oe as _};
