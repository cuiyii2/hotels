import{g as D,a as P,b as U,u as b,c as q,e as R,f as $,d as V}from"./user-94907be7.js";import{u as B,I as E}from"./index-7aebd086.js";import{P as H}from"./index-8a5452c1.js";import{_ as Y}from"./ApplyDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-8c56ff74.js";import{d as h,h as f,l as p,r as u,o as A,j as F,f as a,w as l,b as o,t as g,u as y,E as x,x as M,F as O}from"./main-5a92e9dd.js";import{u as c}from"./serviceDict-82a9115d.js";import"./mplugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_script_setup_true_lang-e4bf2f9f.js";const z={class:"table-box"},J=h({name:"apply"}),re=h({...J,setup(j){const n=f(),v=p({type:1}),T=e=>({list:e.list,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),w=e=>{let t=JSON.parse(JSON.stringify(e));return t.username&&(t.username="custom-"+t.username),D()},{BUTTONS:_}=B(),k=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{prop:"id",label:"用户编号"},{prop:"username",label:"用户名"},{prop:"gender",label:"性别",enum:P,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",search:{el:"input"}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",enum:U,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:e=>a(O,null,[_.value.status?a(u("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>S(e.row)},null):a(u("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",headerRender:e=>a(u("el-button"),{type:"primary",onClick:()=>{x.success("我是通过 tsx 语法渲染的表头")}},{default:()=>[e.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:100}],C=async e=>{await b(V,{id:e},"删除所选用户信息"),n.value.clearSelection(),n.value.getTableList()},S=async e=>{await b(q,{id:e.id,status:e.status==1?0:1},`切换【${e.username}】用户状态`),n.value.getTableList()},N=p({userCode:"12dsds",userName:""}),I=p([{xType:"Input",label:"用户编号",prop:"userCode",placeholder:"请填写用户编号",clearable:!0,span:20},{xType:"Input",label:"用户名",prop:"userName",placeholder:"请填写用户名",clearable:!0,span:20},{xType:"Input",label:"姓名",prop:"name",placeholder:"请填写用户姓名",clearable:!0,span:20},{xType:"Input",label:"所属机构",prop:"org",placeholder:"请填写所属机构",clearable:!0,span:20},{xType:"Select",label:"部门",prop:"dep",clearable:!0,span:20,options:c},{xType:"Select",label:"网络安全启用",prop:"status",clearable:!0,span:20,options:c},{xType:"Input",label:"机器IP",prop:"ip",placeholder:"请填写所属机构",clearable:!0,span:20},{xType:"Select",label:"用户类型",prop:"type",clearable:!0,span:20,options:c},{xType:"Input",label:"备注",type:"textarea",prop:"content",placeholder:"请填写备注",clearable:!0,span:20},{slotName:"Actions"}]),L=p({userName:[{required:!0,message:"请输入名字",trigger:"blur"},{min:2,max:5,message:"名字长度在2-5个字",trigger:"blur"}],userCode:[{required:!0,message:"请填写用户编号"}],name:[{required:!0,message:"请填写用户名"}],kame:[{required:!0,message:"请填写姓名"}],org:[{required:!0,message:"请填写所属机构"}]}),d=f(null),m=(e,t={})=>{var r;const s={title:e,isView:e==="查看",rowData:{...t},api:e==="新增"?R:e==="编辑"?$:void 0,getTableList:n.value.getTableList,formData:N,formColumns:I,formRules:L};(r=d.value)==null||r.acceptParams(s)};return(e,t)=>{const s=u("el-button");return A(),F("div",z,[a(H,{ref_key:"proTable",ref:n,title:"用户列表",columns:k,requestApi:w,initParam:v,dataCallback:T},{tableHeader:l(r=>[a(s,{type:"primary",onClick:t[0]||(t[0]=i=>m("审核"))},{default:l(()=>[o("审核")]),_:1}),a(s,{type:"danger",plain:"",onClick:i=>C(r.selectedListIds)},{default:l(()=>[o(" 删除 ")]),_:2},1032,["onClick"])]),expand:l(r=>[o(g(r.row),1)]),createTime:l(r=>[a(s,{type:"primary",link:"",onClick:t[1]||(t[1]=i=>y(x).success("我是通过作用域插槽渲染的内容"))},{default:l(()=>[o(g(r.row.createTime),1)]),_:2},1024)]),operation:l(r=>[a(s,{type:"primary",link:"",icon:y(M),onClick:i=>m("查看",r.row)},{default:l(()=>[o("详细")]),_:2},1032,["icon","onClick"])]),_:1},8,["initParam"]),a(Y,{ref_key:"drawerRef",ref:d},null,512),a(E,{ref:"dialogRef"},null,512)])}}});export{re as default};
