import{u as n,d as i}from"./user-94907be7.js";import{P as w}from"./index-8a5452c1.js";import{o as h}from"./order-687b9245.js";import{d,h as v,l as x,r as c,o as C,j as T,f as o,w as a,b as p,t as S}from"./main-5a92e9dd.js";import"./_plugin-vue_export-helper-c27b6911.js";const N={class:"table-box"},P=d({name:"user-list"}),O=d({...P,setup(L){const t=v(),u=x({type:1}),m=e=>({list:e.records,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),f=e=>{let l=JSON.parse(JSON.stringify(e));return l.username&&(l.username="custom-"+l.username),h()},_=[{prop:"orderId",label:"创建时间",width:"120px"},{prop:"ordergroup",label:"用户协议"},{prop:"orderType",label:"创建用户"},{prop:"applyid",label:"发布时间"},{prop:"applyid",label:"发布用户",width:"100px"},{prop:"applyid",label:"状态",width:"100px"},{prop:"operation",label:"操作",fixed:"right",width:150}],b=async e=>{await n(i,{id:e},"确认删除该记录"),t.value.clearSelection(),t.value.getTableList()},y=async e=>{await n(i,{id:e},"确认发布该用户协议，该用户协议发布后，原已发布用户协议将失效"),t.value.clearSelection(),t.value.getTableList()};return(e,l)=>{const s=c("el-button"),g=c("el-upload");return C(),T("div",N,[o(w,{ref_key:"proTable",ref:t,title:"用户协议管理",columns:_,requestApi:f,initParam:u,dataCallback:m},{tableHeader:a(()=>[o(g,{ref:"uploadRef",class:"upload-demo",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","auto-upload":!1},{trigger:a(()=>[o(s,{type:"primary",icon:"plus"},{default:a(()=>[p("新增")]),_:1})]),_:1},512)]),expand:a(r=>[p(S(r.row),1)]),operation:a(r=>[o(s,{link:"",onClick:k=>y(r.row),type:"primary"},{default:a(()=>[p("发布")]),_:2},1032,["onClick"]),o(s,{link:"",onClick:k=>b(r.row),type:"danger"},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1},8,["initParam"])])}}});export{O as default};
