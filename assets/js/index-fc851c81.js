import{P as w}from"./index-8a5452c1.js";import{_ as D}from"./index.vue_vue_type_script_setup_true_name_dialogRes_lang-8c858457.js";import{d as y,h as i,l as o,n as k,r as S,o as A,j as E,f as t,w as l,b as u,t as c,a as R,u as b,E as P}from"./main-5a92e9dd.js";import{o as q,b as F}from"./order-687b9245.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-e4bf2f9f.js";import{g as J}from"./businessDic-7728b785.js";import{b as f}from"./serviceDict-82a9115d.js";import"./mplugin-vue_export-helper-c27b6911.js";const L={class:"table-box"},O=y({name:"user-apply-list"}),U=y({...O,setup(Y){const d=i(),g=o({type:1}),T=r=>({list:r.records,total:r.total,pageNum:r.pageNum,pageSize:r.pageSize}),_=r=>{let e=JSON.parse(JSON.stringify(r));return e.username&&(e.username="custom-"+e.username),q()},v=[{prop:"orderId",label:"订单ID"},{prop:"ordergroup",label:"客房ID",search:{order:1,el:"input"}},{prop:"clearAid",label:"客房号",search:{el:"input"}},{prop:"price",label:"房间价格"},{prop:"roomType",label:"订单状态"},{prop:"createTime",label:"预定时间",search:{el:"date-picker",props:{type:"daterange",valueFormat:"YYYY-MM-DD"},defaultValue:["2024-09-12","2024-10-12"]}},{prop:"operation",label:"操作",fixed:"right",width:150}],m=o({tradeDay:k(),orderId:"",org:"",type:"",price:0,total:0,volume:0,action:0,content:[],tradeType:""});let x=o([{xType:"Input",label:"机构名称",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Select",label:"机构类型",prop:"dealerAid",placeholder:"请填写买方经纪商",clearable:!0,span:24,options:f},{xType:"Checkbox",label:"机构标识",prop:"content",span:24,options:[{value:"0",label:"钓鱼放弃会员"},{value:"1",label:"连续"}]},{xType:"Input",label:"用户编码",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"用户名",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"用户姓名",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"身份证号",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"用户手机号",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"证书",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Select",label:"用户类型",prop:"dealerAid2",placeholder:"请填写",clearable:!0,span:24,options:f},{xType:"Select",label:"用户状态",prop:"aid",placeholder:"请填写",clearable:!0,span:24,options:[{value:1,label:"上海方正投资"},{value:2,label:"上海大光投资"}]},{xType:"Input",label:"创建人",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{slotName:"Actions"}]);const I=o({symbol:[{required:!0,message:"请输入名字",trigger:"blur"}],price:[{required:!0,message:"请填写"}],volume:[{required:!0,message:"请选择"}],tradeDay:[{required:!0,message:"请填写"}]}),p=i(null),h=async()=>{var e;if(!p.value)return;await((e=p.value)==null?void 0:e.formRef).validate(async(n,a)=>{if(!n)return;let N=JSON.parse(JSON.stringify(m));(await F(N)).code==0&&(P.success("添加成功！"),d.value.getTableList(),s.value=!1)})},s=i(!1),C=()=>{s.value=!1};return(r,e)=>{const n=S("el-button");return A(),E("div",L,[t(w,{ref_key:"proTable",ref:d,title:"用户列表",columns:v,requestApi:_,initParam:g,dataCallback:T},{expand:l(a=>[u(c(a.row),1)]),action:l(a=>[R("span",null,c(b(J)(a.row.action)),1)]),orderType:l(a=>[u(c(a.row.orderType==1?"爬树普通上山":"-"),1)]),operation:l(()=>[t(n,{link:"",type:"primary"},{default:l(()=>[u("取消订单")]),_:1})]),_:1},8,["initParam"]),t(D,{visible:s.value,confirmName:"保存",title:"修改",onClose:e[0]||(e[0]=a=>C()),onConfirm:e[1]||(e[1]=a=>h()),width:"408"},{default:l(()=>[t(V,{formData:m,formColumns:b(x),formRules:I,"label-width":"120px",ref_key:"baseForm",ref:p},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"])])}}});export{U as default};
