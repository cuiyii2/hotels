import{P as D}from"./index-8a5452c1.js";import{u as b,d as y}from"./user-94907be7.js";import{o as R}from"./order-687b9245.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_name_dialogRes_lang-8c858457.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-e4bf2f9f.js";import{b as L,g as P}from"./serviceDict-82a9115d.js";import{d as g,h as d,l as m,r as F,o as O,j as A,f as t,w as a,b as p,t as J,u as M,E as Y}from"./main-5a92e9dd.js";import"./mplugin-vue_export-helper-c27b6911.js";const I={class:"table-box"},V=g({name:"user-list"}),X=g({...V,setup(j){const r=d(),v=m({type:1}),x=e=>({list:e.records,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),_=e=>{let l=JSON.parse(JSON.stringify(e));return l.username&&(l.username="custom-"+l.username),R()},w=async e=>{await b(y,{id:e},"确认删除该消息"),r.value.clearSelection(),r.value.getTableList()},k=async e=>{await b(y,{id:e},"确认发布该消息"),r.value.clearSelection(),r.value.getTableList()},T=[{prop:"orderId",label:"创建时间",width:"180px",search:{el:"date-picker",props:{type:"daterange",valueFormat:"YYYY-MM-DD"}}},{prop:"applyid",label:"消息标题",width:"100px",search:{el:"select"}},{prop:"ordergroup",label:"消息内容"},{prop:"dealeraid2",label:"创建用户"},{prop:"orderType",label:"修改时间",width:"100px"},{prop:"orderType",label:"修改用户",width:"100px"},{prop:"orderType",label:"发布时间"},{prop:"orderType",label:"发布用户",width:"100px"},{prop:"orderType",label:"消息状态",width:"100px",search:{el:"select"}},{prop:"orderType",label:"接收对象",width:"100px",search:{el:"select"}},{prop:"operation",label:"操作",fixed:"right",width:160}],i=m({orderId:"",org:"",type:"",price:0,total:0,msger:[],volume:0,action:0,tradeType:""});let h=m([{xType:"Select",label:"消息标题",prop:"dealerAid",placeholder:"请选择",clearable:!0,span:24,options:L},{xType:"Input",label:"消息内容",prop:"type",type:"textarea",placeholder:"请填写",clearable:!0,span:24},{xType:"Checkbox",label:"接收对象",prop:"msger",class:"form-checkbox",options:P,span:24},{xType:"Upload",label:"上传附件",prop:"price",placeholder:"请填写",span:24},{slotName:"Actions"}]);const C=m({}),u=d(null),N=async()=>{var l;if(!u.value)return;await((l=u.value)==null?void 0:l.formRef).validate(async(s,o)=>{if(!s)return;let c=JSON.parse(JSON.stringify(i));(await offlineAdd(c)).code==0&&(Y.success("添加成功！"),r.value.getTableList(),n.value=!1)})},n=d(!1),S=()=>{n.value=!1},f=e=>{e!=1&&Object.assign(i,e),n.value=!0};return(e,l)=>{const s=F("el-button");return O(),A("div",I,[t(D,{ref_key:"proTable",ref:r,title:"消息中心管理",columns:T,requestApi:_,initParam:v,dataCallback:x},{tableHeader:a(()=>[t(s,{icon:"plus",onClick:l[0]||(l[0]=o=>f(1))},{default:a(()=>[p("新增")]),_:1})]),expand:a(o=>[p(J(o.row),1)]),operation:a(o=>[t(s,{link:"",onClick:l[1]||(l[1]=c=>f(1)),type:"primary"},{default:a(()=>[p("修改")]),_:1}),t(s,{link:"",onClick:c=>w(o.row),type:"danger"},{default:a(()=>[p("删除")]),_:2},1032,["onClick"]),t(s,{link:"",onClick:c=>k(o.row),type:"primary"},{default:a(()=>[p("发布")]),_:2},1032,["onClick"])]),_:1},8,["initParam"]),t($,{visible:n.value,confirmName:"保存",title:"消息中心",onClose:l[2]||(l[2]=o=>S()),onConfirm:l[3]||(l[3]=o=>N()),width:"508px"},{default:a(()=>[t(E,{formData:i,formColumns:M(h),formRules:C,"label-width":"120px",ref_key:"baseForm",ref:u},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"])])}}});export{X as default};
