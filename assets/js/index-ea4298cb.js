import{u as J,d as P}from"./user-94907be7.js";import{P as V}from"./index-8a5452c1.js";import{_ as x}from"./index.vue_vue_type_script_setup_true_name_dialogRes_lang-8c858457.js";import{o as q,b as M}from"./order-687b9245.js";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang-e4bf2f9f.js";import{g as Y}from"./businessDic-7728b785.js";import{b as B,p as j}from"./serviceDict-82a9115d.js";import{d as C,h as d,l as i,n as z,r as H,o as U,j as W,f as r,w as t,b as n,t as y,a as G,u as g,E as K}from"./main-5a92e9dd.js";import"./mplugin-vue_export-helper-c27b6911.js";const Q={class:"table-box"},X=C({name:"user-list"}),ue=C({...X,setup(Z){const m=d(),_=i({type:1}),T=l=>({list:l.records,total:l.total,pageNum:l.pageNum,pageSize:l.pageSize}),D=l=>{let e=JSON.parse(JSON.stringify(l));return e.username&&(e.username="custom-"+e.username),q()},N=[{prop:"orderId",label:"用户名",width:"120px",search:{order:1,el:"input"}},{prop:"ordergroup",label:"用户姓名",width:"120px",search:{el:"input"}},{prop:"orderType",label:"用户类型",width:"100px"},{prop:"org",label:"用户部门",labelWidth:90,search:{el:"input"},width:"100px"},{prop:"symbol",label:"用户描述",width:"100px"},{prop:"applyid",label:"用户手机号",width:"100px"},{prop:"dealeraid2",label:"证书",width:"90px"},{prop:"aidd2",label:"用户状态",width:"100px"},{prop:"clearAid2",label:"操作人",width:"110px"},{prop:"tradeDay",label:"操作日期",search:{el:"date-picker",props:{type:"daterange",valueFormat:"YYYY-MM-DD"},defaultValue:["2022-11-12","2022-12-12"]},width:"100px"},{prop:"createTime",label:"操作时间",width:"100px"},{prop:"operation",label:"操作",fixed:"right",width:290}],f=async l=>{await J(P,{id:l},"确认要撤销当前上山单吗"),m.value.clearSelection(),m.value.getTableList()},p=i({tradeDay:z(),orderId:"",org:"",type:"",price:0,total:0,volume:0,action:0,tradeType:""});let R=i([{xType:"Input",label:"用户名",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"用户姓名",prop:"type",placeholder:"请填写",clearable:!0,span:24},{xType:"Select",label:"用户类型",prop:"dealerAid",placeholder:"请填写买方经纪商",clearable:!0,span:24,options:B},{xType:"Input",label:"用户部门",prop:"dealerAid2",placeholder:"请填写",clearable:!0,span:24},{xType:"Select",label:"用户手机号",prop:"aid",placeholder:"请填写",clearable:!0,span:24,options:[{value:1,label:"上海方正投资"},{value:2,label:"上海大光投资"}]},{xType:"Input",label:"证书",prop:"price",placeholder:"请填写上山价格",type:"number",span:24},{xType:"Input",label:"用户描述",prop:"volume",placeholder:"请填写上山数量",type:"textarea",span:24,rows:5},{slotName:"Actions"}]);function $(l,e){}function v(l){b.value=!0}const w=i({symbol:[{required:!0,message:"请输入名字",trigger:"blur"}],price:[{required:!0,message:"请填写"}],volume:[{required:!0,message:"请选择"}],tradeDay:[{required:!0,message:"请填写"}]}),u=d(null),S=async()=>{var e;if(!u.value)return;await((e=u.value)==null?void 0:e.formRef).validate(async(o,a)=>{if(!o)return;let s=JSON.parse(JSON.stringify(p));(await M(s)).code==0&&(K.success("添加成功！"),m.value.getTableList(),c.value=!1)})},E=d(null),I=async()=>{var e;if(!u.value)return;await((e=u.value)==null?void 0:e.formRef).validate(async(o,a)=>{if(!o)return;let s=JSON.parse(JSON.stringify(p))})},A=i({permissionsMenu:[]});let F=i([{xType:"Tree",label:"",prop:"permissionsMenu",data:j,style:"display:block;float:left","show-checkbox":!0,"node-key":"id",check:$,float:"left",span:24}]);const c=d(!1),b=d(!1),L=()=>{c.value=!1},k=l=>{l!=1&&Object.assign(p,l),c.value=!0},O=()=>{b.value=!1};return(l,e)=>{const o=H("el-button");return U(),W("div",Q,[r(V,{ref_key:"proTable",ref:m,title:"用户列表",columns:N,requestApi:D,initParam:_,dataCallback:T},{tableHeader:t(()=>[r(o,{icon:"plus",onClick:e[0]||(e[0]=a=>k(1))},{default:t(()=>[n("新增用户")]),_:1})]),expand:t(a=>[n(y(a.row),1)]),action:t(a=>[G("span",null,y(g(Y)(a.row.action)),1)]),orderType:t(a=>[n(y(a.row.orderType==1?"爬树普通上山":"-"),1)]),operation:t(a=>[r(o,{link:"",onClick:e[1]||(e[1]=s=>k(1)),type:"primary"},{default:t(()=>[n("修改")]),_:1}),r(o,{link:"",onClick:s=>f(a.row.selectedListIds),type:"primary"},{default:t(()=>[n("解冻")]),_:2},1032,["onClick"]),r(o,{link:"",onClick:s=>v(a.row),type:"primary"},{default:t(()=>[n("权限")]),_:2},1032,["onClick"]),r(o,{link:"",onClick:s=>v(a.row),type:"primary"},{default:t(()=>[n("密码重置")]),_:2},1032,["onClick"]),r(o,{link:"",onClick:s=>f(a.row.selectedListIds),type:"danger"},{default:t(()=>[n("冻结")]),_:2},1032,["onClick"]),r(o,{link:"",onClick:s=>f(a.row),type:"danger"},{default:t(()=>[n("注销")]),_:2},1032,["onClick"])]),_:1},8,["initParam"]),r(x,{visible:c.value,confirmName:"保存",title:"管理员新增",onClose:e[2]||(e[2]=a=>L()),onConfirm:e[3]||(e[3]=a=>S()),width:"408px"},{default:t(()=>[r(h,{formData:p,formColumns:g(R),formRules:w,"label-width":"120px",ref_key:"baseForm",ref:u},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"]),r(x,{visible:b.value,confirmName:"保存",title:"权限管理",onClose:e[4]||(e[4]=a=>O()),onConfirm:e[5]||(e[5]=a=>I()),width:"408px"},{default:t(()=>[r(h,{formData:A,formColumns:g(F),formRules:w,"label-width":"0px",ref_key:"baseForm2",ref:E},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"])])}}});export{ue as default};
