import{g as P,a as U,b as A,u as b,c as q,e as f,f as g,d as V}from"./user-94907be7.js";import{u as $,I as B}from"./index-7aebd086.js";import{P as E}from"./index-8a5452c1.js";import{_ as H}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-8cb6faf3.js";import Y from"./RoleAuthDrawer-c33d920d.js";import{u as F}from"./serviceDict-82a9115d.js";import{d as w,h as d,l as u,r as i,o as M,j as O,f as r,w as l,b as o,t as y,u as z,E as h,F as J}from"./main-5a92e9dd.js";import"./mplugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_script_setup_true_lang-e4bf2f9f.js";import"./AuthTree.vue_vue_type_style_index_0_lang-0dcda5e1.js";const j={class:"table-box"},G=w({name:"users"}),oe=w({...G,setup(K){const n=d(),v=u({type:1}),_=e=>({list:e.list,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),x=e=>{let a=JSON.parse(JSON.stringify(e));return a.username&&(a.username="custom-"+a.username),P()},{BUTTONS:T}=$(),k=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{prop:"id",label:"用户编号"},{prop:"username",label:"用户名"},{prop:"gender",label:"性别",enum:U,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",search:{el:"input"}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",enum:A,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:e=>r(J,null,[T.value.status?r(i("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>S(e.row)},null):r(i("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",headerRender:e=>r(i("el-button"),{type:"primary",onClick:()=>{h.success("我是通过 tsx 语法渲染的表头")}},{default:()=>[e.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:100}],C=async e=>{await b(V,{id:e},"删除所选用户信息"),n.value.clearSelection(),n.value.getTableList()},S=async e=>{await b(q,{id:e.id,status:e.status==1?0:1},`切换【${e.username}】用户状态`),n.value.getTableList()},N=u({userCode:"12dsds",userName:""}),D=u([{xType:"Input",label:"角色编号",prop:"userCode",placeholder:"请填写角色编号",clearable:!0,span:20},{xType:"Input",label:"角色名称",prop:"userName",placeholder:"请填写角色名称",clearable:!0,span:20},{xType:"Input",label:"所属机构",prop:"org",placeholder:"默认为当前操作机构",clearable:!0,span:20},{xType:"Select",label:"角色类型",prop:"dep",clearable:!0,span:20,options:F},{xType:"Input",label:"备注",type:"textarea",prop:"content",placeholder:"请填写备注",clearable:!0,span:20},{slotName:"Actions"}]),L=u({userName:[{required:!0,message:"请输入名字",trigger:"blur"},{min:2,max:5,message:"名字长度在2-5个字",trigger:"blur"}],userCode:[{required:!0,message:"请填写用户编号"}],name:[{required:!0,message:"请填写用户名"}],kame:[{required:!0,message:"请填写姓名"}],org:[{required:!0,message:"请填写所属机构"}]}),c=d(null),R=(e,a={})=>{var t;const s={title:e,isView:e==="查看",rowData:{...a},api:e==="新增"?f:e==="编辑"?g:void 0,getTableList:n.value.getTableList,formData:N,formColumns:D,formRules:L};(t=c.value)==null||t.acceptParams(s)},m=d(null),I=(e,a)=>{var t;const s={title:"平台",isView:e==="查看",id:a,api:e==="新增"?f:e==="编辑"?g:void 0};(t=m.value)==null||t.acceptParams(s)};return(e,a)=>{const s=i("el-button");return M(),O("div",j,[r(E,{ref_key:"proTable",ref:n,title:"用户列表",columns:k,requestApi:x,initParam:v,dataCallback:_},{tableHeader:l(t=>[r(s,{type:"primary",onClick:a[0]||(a[0]=p=>R("新增"))},{default:l(()=>[o("新建")]),_:1}),r(s,{type:"primary",plain:"",onClick:p=>I("平台",t.selectedListIds)},{default:l(()=>[o("赋权")]),_:2},1032,["onClick"]),r(s,{type:"danger",plain:"",onClick:p=>C(t.selectedListIds),disabled:!t.isSelected},{default:l(()=>[o(" 注销 ")]),_:2},1032,["onClick","disabled"])]),expand:l(t=>[o(y(t.row),1)]),createTime:l(t=>[r(s,{type:"primary",link:"",onClick:a[1]||(a[1]=p=>z(h).success("我是通过作用域插槽渲染的内容"))},{default:l(()=>[o(y(t.row.createTime),1)]),_:2},1024)]),_:1},8,["initParam"]),r(H,{ref_key:"drawerRef",ref:c},null,512),r(Y,{ref_key:"AuthdrawerRef",ref:m},null,512),r(B,{ref:"dialogRef"},null,512)])}}});export{oe as default};
