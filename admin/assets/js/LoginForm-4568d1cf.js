import{d as M,x as U,G as q,h as m,i as f,B as z,r as s,o as g,j as v,f as e,w as o,F as b,y as E,a as D,b as w,u as y,H as G,I as H,J as I,K as J,L as $,M as j}from"./main-59e74578.js";import{T as O,K as Y}from"./keepAlive-c2edfa74.js";import{_ as Z}from"./mplugin-vue_export-helper-c27b6911.js";const h={class:"login-btn"},P=M({__name:"LoginForm",setup(Q){const k=U(),V=O(),x=Y(),F=q(),r=m(),L=f({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],institution:[{required:!0,message:"请选择机构",trigger:"blur"}]}),i=m(!1),a=f({username:"",password:"",institution:""}),c=t=>{t&&t.validate(async n=>{if(n){i.value=!0;try{F.setToken("data.access_token"),await I(),V.closeMultipleTab(),x.setKeepAliveName(),k.push(J),$({title:j(),message:"欢迎登录 DZJY-Admin",type:"success",duration:3e3})}finally{i.value=!1}}})},N=t=>{t&&t.resetFields()},R=[{value:"机构1",label:"机构1"},{value:"机构2",label:"机构2"}];return z(()=>{document.onkeydown=t=>{if(t=window.event||t,t.code==="Enter"||t.code==="enter"||t.code==="NumpadEnter"){if(i.value)return;c(r.value)}}}),(t,n)=>{const S=s("Link"),u=s("el-icon"),T=s("el-option"),C=s("el-select"),d=s("el-form-item"),A=s("user"),_=s("el-input"),B=s("lock"),K=s("el-form"),p=s("el-button");return g(),v(b,null,[e(K,{ref_key:"loginFormRef",ref:r,model:a,rules:L,size:"large"},{default:o(()=>[e(d,{prop:"institution"},{default:o(()=>[e(C,{modelValue:a.institution,"onUpdate:modelValue":n[0]||(n[0]=l=>a.institution=l),style:{width:"100%"},placeholder:"请选择"},{prefix:o(()=>[e(u,{class:"el-input__icon"},{default:o(()=>[e(S)]),_:1})]),default:o(()=>[(g(),v(b,null,E(R,l=>e(T,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"username"},{default:o(()=>[e(_,{modelValue:a.username,"onUpdate:modelValue":n[1]||(n[1]=l=>a.username=l),placeholder:"用户名：admin / user"},{prefix:o(()=>[e(u,{class:"el-input__icon"},{default:o(()=>[e(A)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"password"},{default:o(()=>[e(_,{type:"password",modelValue:a.password,"onUpdate:modelValue":n[2]||(n[2]=l=>a.password=l),placeholder:"密码：123456","show-password":"",autocomplete:"new-password"},{prefix:o(()=>[e(u,{class:"el-input__icon"},{default:o(()=>[e(B)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),D("div",h,[e(p,{icon:y(G),round:"",onClick:n[3]||(n[3]=l=>N(r.value)),size:"large"},{default:o(()=>[w("重置")]),_:1},8,["icon"]),e(p,{icon:y(H),round:"",onClick:n[4]||(n[4]=l=>c(r.value)),size:"large",type:"primary",loading:i.value},{default:o(()=>[w(" 登录 ")]),_:1},8,["icon","loading"])])],64)}}});const oe=Z(P,[["__scopeId","data-v-3147ea74"]]);export{oe as default};
