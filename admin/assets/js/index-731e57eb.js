import{u as A,d as L}from"./useHandleData-899ca090.js";import{P as V,u as M,a as j}from"./order-3c724f3a.js";import{_ as y}from"./index.vue_vue_type_script_setup_true_name_dialogRes_lang-44d68dcf.js";import{_}from"./index.vue_vue_type_script_setup_true_lang-ba6abaa3.js";import{d as w,h as u,i as r,k as z,r as k,o as B,j as H,f as l,w as a,b as m,t as U,u as C,E as G}from"./main-59e74578.js";import{p as K}from"./serviceDict-2813f393.js";import"./mplugin-vue_export-helper-c27b6911.js";const Q={class:"table-box"},W=w({name:"user-list"}),se=w({...W,setup(X){const f=u(),x=r({type:1}),D=t=>({list:t.records,total:t.total,pageNum:t.pageNum,pageSize:t.pageSize}),R=t=>{let e=JSON.parse(JSON.stringify(t));return e.username&&(e.username="custom-"+e.username),M()},T=[{prop:"Id",label:"ID"},{prop:"username",label:"用户名",width:"120px"},{prop:"password",label:"用户密码"},{prop:"operation",label:"操作",fixed:"right",width:180}],N=async t=>{await A(L,{id:t},"确认要撤销当前上山单吗"),f.value.clearSelection(),f.value.getTableList()},n=r({tradeDay:z(),orderId:"",org:"",type:"",price:0,total:0,volume:0,action:0,tradeType:""});let E=r([{xType:"Input",label:"用户名",prop:"orderId",placeholder:"请填写",clearable:!0,span:24},{xType:"Input",label:"用户密码",prop:"type",placeholder:"请填写",clearable:!0,span:24},{slotName:"Actions"}]);function S(t,e){}function $(t){c.value=!0}const g=r({symbol:[{required:!0,message:"请输入名字",trigger:"blur"}],price:[{required:!0,message:"请填写"}],volume:[{required:!0,message:"请选择"}],tradeDay:[{required:!0,message:"请填写"}]}),i=u(null),h=async()=>{var e;if(!i.value)return;await((e=i.value)==null?void 0:e.formRef).validate(async(s,d)=>{if(!s)return;let o=JSON.parse(JSON.stringify(n));(await j(o)).code==0&&(G.success("添加成功！"),f.value.getTableList(),p.value=!1)})},F=u(null),O=async()=>{var e;if(!i.value)return;await((e=i.value)==null?void 0:e.formRef).validate(async(s,d)=>{if(!s)return;let o=JSON.parse(JSON.stringify(n))})},I=r({permissionsMenu:[]});let J=r([{xType:"Tree",label:"",prop:"permissionsMenu",data:K,style:"display:block;float:left","show-checkbox":!0,"node-key":"id",check:S,float:"left",span:24}]);const p=u(!1),c=u(!1),P=()=>{p.value=!1},v=t=>{t!=1&&Object.assign(n,t),p.value=!0},q=()=>{c.value=!1};return(t,e)=>{const s=k("el-button"),d=k("el-tag");return B(),H("div",Q,[l(V,{ref_key:"proTable",ref:f,title:"用户列表",columns:T,requestApi:R,initParam:x,dataCallback:D},{tableHeader:a(()=>[l(s,{icon:"plus",type:"primary",onClick:e[0]||(e[0]=o=>v(1))},{default:a(()=>[m("新增用户")]),_:1})]),num:a(o=>[l(d,{type:"success"},{default:a(()=>[m(U(o.row.num==10?"正常":"-"),1)]),_:2},1024)]),operation:a(o=>[l(s,{link:"",onClick:e[1]||(e[1]=b=>v(1)),type:"primary"},{default:a(()=>[m("修改")]),_:1}),l(s,{link:"",onClick:b=>N(o.row),type:"danger"},{default:a(()=>[m("删除")]),_:2},1032,["onClick"]),l(s,{link:"",onClick:b=>$(o.row),type:"primary"},{default:a(()=>[m("权限")]),_:2},1032,["onClick"])]),_:1},8,["initParam"]),l(y,{visible:p.value,confirmName:"确认",title:"新增",onClose:e[2]||(e[2]=o=>P()),onConfirm:e[3]||(e[3]=o=>h()),width:"408px"},{default:a(()=>[l(_,{formData:n,formColumns:C(E),formRules:g,"label-width":"120px",ref_key:"baseForm",ref:i},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"]),l(y,{visible:c.value,confirmName:"保存",title:"权限管理",onClose:e[4]||(e[4]=o=>q()),onConfirm:e[5]||(e[5]=o=>O()),width:"408px"},{default:a(()=>[l(_,{formData:I,formColumns:C(J),formRules:g,"label-width":"0px",ref_key:"baseForm2",ref:F},null,8,["formData","formColumns","formRules"])]),_:1},8,["visible"])])}}});export{se as default};
